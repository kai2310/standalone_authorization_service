{
  "apiVersion":"0.2",
  "swaggerVersion":"1.2",
  "basePath":"http://<base>/api/v2/authorization",
  "resourcePath":"/authorization",
  "apis":[
    {
      "path":"/authorize",
      "description":"Assert authorization",
      "operations":[
        {
          "httpMethod":"GET",
          "summary":"Check authorization",
          "responseClass":"AuthorizeResponse",
          "nickname":"authorizeGet",
          "parameters":[
            {
              "name":"user_token",
              "description":"A valid user token (user token or access token required)",
              "paramType":"query",
              "required":false,
              "allowMultiple":false,
              "dataType":"string"
            },
            {
              "name":"accountContext",
              "description":"The account context, in the form accountType/accountId. If specified only permissions for this account will be returned.",
              "paramType":"query",
              "required":false,
              "allowMultiple":false,
              "dataType":"string"
            },
            {
              "name":"service",
              "description":"The service that the operation is being performed on.",
              "paramType":"query",
              "required":true,
              "allowMultiple":false,
              "dataType":"string"
            },
            {
              "name":"resource",
              "description":"The resource being accessed.",
              "paramType":"query",
              "required":true,
              "allowMultiple":false,
              "dataType":"string"
            },
            {
              "name":"action",
              "description":"The action being performed on the resource.",
              "paramType":"query",
              "required":true,
              "allowMultiple":false,
              "dataType":"string"
            },
            {
              "name":"authorizedAccounts",
              "description":"Return the authorizedAccounts with the response",
              "paramType":"query",
              "required":false,
              "allowMultiple":false,
              "dataType":"boolean"
            },
            {
              "name":"trace",
              "description":"Generate a request trace (debugging only). Use email:{email address} to send a trace.",
              "paramType":"query",
              "required":false,
              "allowMultiple":false,
              "dataType":"string"
            }
          ]
        },
        {
          "httpMethod":"POST",
          "summary":"Check authorization",
          "responseClass":"AuthorizeResponse",
          "nickname":"authorizePost",
          "parameters":[
            {
              "name":"trace",
              "description":"Generate a request trace (debugging only). Use email:{email address} to send a trace.",
              "paramType":"query",
              "required":false,
              "allowMultiple":false,
              "dataType":"string"
            },
            {
              "name":"authorizedAccounts",
              "description":"Return the authorizedAccounts with the response",
              "paramType":"query",
              "required":false,
              "allowMultiple":false,
              "dataType":"boolean"
            },
            {
              "name":"request",
              "description":"The authorize request",
              "paramType":"body",
              "required":true,
              "allowMultiple":false,
              "dataType":"AuthorizeRequest"
            }
          ]
        }
      ]
    },
    {
      "path":"/authorizeOperations",
      "description":"Assert authorizations",
      "operations":[
        {
          "httpMethod":"POST",
          "summary":"Check authorizations",
          "responseClass":"AuthorizeOperationsResponse",
          "nickname":"authorizeOperations",
          "parameters":[

            {
              "name":"authorizedAccounts",
              "description":"Return the authorizedAccounts with the response",
              "paramType":"query",
              "required":false,
              "allowMultiple":false,
              "dataType":"boolean"
            },
            {
              "name":"trace",
              "description":"Generate a request trace (debugging only). Use email:{email address} to send a trace.",
              "paramType":"query",
              "required":false,
              "allowMultiple":false,
              "dataType":"string"
            },
            {
              "name":"request",
              "description":"The authorize request",
              "paramType":"body",
              "required":true,
              "allowMultiple":false,
              "dataType":"AuthorizeOperationsRequest"
            }
          ]
        }
      ]
    }
  ],
  "models":{
    "AuthorizeRequest":{
      "id":"AuthorizeRequest",
      "properties":{
        "userToken":{
          "type":"string"
        },
        "accessToken":{
          "type":"string"
        },
        "accountContext":{
          "type":"string"
        },
        "service":{
          "type":"string"
        },
        "resource":{
          "type":"string"
        },
        "action":{
          "type":"string"
        }
      }
    },
    "AuthorizeOperationsRequest":{
      "id":"AuthorizeOperationsRequest",
      "properties":{
        "userToken":{
          "type":"string"
        },
        "accessToken":{
          "type":"string"
        },
        "accountContext":{
          "type":"string"
        },
        "operations":{
          "items":{
            "type":"OperationRequest"
          },
          "type":"Array"
        }
      }
    },
    "OperationRequest":{
      "id":"OperationRequest",
      "properties":{
        "service":{
          "type":"string"
        },
        "resource":{
          "type":"string"
        },
        "action":{
          "type":"string"
        }
      }
    },
    "UserInfo": {
      "id":"UserInfo",
      "properties" : {
        "userId": {
          "type": "long"
        },
        "username": {
          "type": "string"
        },
        "email": {
          "type": "string"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        }
      }
    },
    "BaseAuthorizeResponse": {
      "id":"BaseAuthorizeResponse",
      "properties" : {
        "service":{
          "type":"string"
        },
        "resource":{
          "type":"string"
        },
        "action":{
          "type":"string"
        },
        "authorized":{
          "type":"bool"
        },
        "reason":{
          "type":"string"
        },
        "authorizedAccounts":{
          "items":{
            "$ref":"AuthorizedAccount"
          },
          "type":"Array"
        },
        "scope":{
          "items":{
            "type":"string"
          },
          "type":"Array"
        }
      }
    },
    "AuthorizeResponse":{
      "id":"AuthorizeResponse",
      "properties":{
        "service":{
          "type":"string"
        },
        "resource":{
          "type":"string"
        },
        "action":{
          "type":"string"
        },
        "authorized":{
          "type":"bool"
        },
        "reason":{
          "type":"string"
        },
        "userInfo": {
          "$ref": "UserInfo"
        },
        "authorizedAccounts":{
          "items":{
            "$ref":"AuthorizedAccount"
          },
          "type":"Array"
        },
        "scope":{
          "items":{
            "type":"string"
          },
          "type":"Array"
        }
      }
    },
    "AuthorizedAccount":{
      "id":"AuthorizedAccount",
      "properties":{
        "accountId":{
          "type":"string"
        },
        "allowedProperties":{
          "items":{
            "type":"string"
          },
          "type":"Array"
        },
        "deniedProperties":{
          "items":{
            "type":"string"
          },
          "type":"Array"
        }
      }
    },
    "AuthorizeOperationsResponse":{
      "id":"AuthorizeOperationsResponse",
      "properties":{
        "userInfo": {
          "$ref": "UserInfo"
        },
        "authorizeResponses":{
          "items":{
            "$ref":"BaseAuthorizeResponse"
          },
          "type":"Array"
        }
      }
    }
  }
}